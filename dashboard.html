<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Guilda Canil 99</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; display: flex; height: 100vh; }
  .sidebar { width: 250px; background-color: #2c3e50; color: white; padding: 20px; box-sizing: border-box; }
  .sidebar h2 { color: #ecf0f1; margin-bottom: 20px; }
  .sidebar button { width: 100%; margin: 5px 0; padding: 10px; background-color: #34495e; color: white; border: none; border-radius: 5px; cursor: pointer; }
  .sidebar button:hover { background-color: #1abc9c; }
  .main { flex-grow: 1; background-color: #ecf0f1; padding: 20px; overflow-y: auto; }
  h1 { margin-top: 0; color: #2c3e50; }
  .panel { background-color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 0 5px rgba(0,0,0,0.2); }
  input, button { padding: 5px; margin: 5px 0; width: 100%; box-sizing: border-box; }
  ul { list-style-type: none; padding: 0; }
  li { padding: 5px 0; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
  li span { flex-grow: 1; }
  li button { margin-left: 5px; width: auto; padding: 3px 6px; }
  .points-0 { background-color: #f8d7da; }  /* vermelho claro */
  .points-1 { background-color: #fff3cd; }  /* amarelo claro */
  .points-3 { background-color: #d1ecf1; }  /* azul claro */
  .points-5 { background-color: #d4edda; }  /* verde claro */
</style>
</head>
<body>

<div class="sidebar">
  <h2>Menu Guilda</h2>
  <button onclick="showPanel('list')">üìú Lista de membros</button>
  <button onclick="showPanel('add')">‚ûï Adicionar membro</button>
</div>

<div class="main">
  <h1>üêæ Dashboard Guilda Canil 99 üêæ</h1>

  <!-- Painel Adicionar Membro -->
  <div class="panel" id="addPanel" style="display:none;">
    <h2>Adicionar Membro</h2>
    <input type="text" id="youtube" placeholder="Nome no YouTube">
    <input type="text" id="ff" placeholder="Nome no Free Fire">
    <button onclick="addMember()">Adicionar</button>
  </div>

  <!-- Painel Lista de Membros -->
  <div class="panel" id="listPanel">
    <h2>Lista de Membros</h2>
    <ul id="membersList"></ul>
    <button onclick="resetPoints()">Zerar pontos e faltas</button>
    <button onclick="exportData()">üíæ Exportar dados</button>
    <input type="file" id="importFile" style="margin-top:10px;">
    <button onclick="importData()">üìÇ Importar dados</button>
  </div>
</div>

<script>
  // Inicializar membros do Local Storage ou usar padr√£o
  let members = JSON.parse(localStorage.getItem("guildaMembers")) || [
    {youtube:"jorgin", ff:"jorgin", pontos:4, faltas:0},
    {youtube:"Espanca v√©ia", ff:"MK Fivem", pontos:3, faltas:0},
    {youtube:"Coringa", ff:"tiago", pontos:3, faltas:0},
    {youtube:"Warlinxt", ff:"warley felipe", pontos:4, faltas:0},
    {youtube:"Drackz", ff:"C99 drackz", pontos:3, faltas:0},
    {youtube:"26", ff:"Diego26", pontos:4, faltas:0}
  ];

  function saveData() {
    localStorage.setItem("guildaMembers", JSON.stringify(members));
  }

  function showPanel(panel) {
    document.getElementById("addPanel").style.display = panel === 'add' ? 'block' : 'none';
    document.getElementById("listPanel").style.display = panel === 'list' ? 'block' : 'none';
  }

  function renderList() {
    const list = document.getElementById("membersList");
    list.innerHTML = "";
    members.sort((a,b) => b.pontos - a.pontos);

    members.forEach((m, index) => {
      let li = document.createElement("li");
      let className = m.pontos >=5 ? "points-5" :
                      m.pontos >=3 ? "points-3" :
                      m.pontos >=1 ? "points-1" : "points-0";
      li.className = className;

      let span = document.createElement("span");
      span.innerHTML = `<strong>${m.youtube}</strong> = ${m.ff} ‚Äî üèÖ ${m.pontos} pts | üö´ ${m.faltas} faltas`;
      li.appendChild(span);

      let btnAdd = document.createElement("button");
      btnAdd.innerText = "+1 ponto";
      btnAdd.onclick = () => { addPoint(index); };
      li.appendChild(btnAdd);

      let btnSub = document.createElement("button");
      btnSub.innerText = "-1 ponto (falta)";
      btnSub.onclick = () => { subPoint(index); };
      li.appendChild(btnSub);

      let btnRemove = document.createElement("button");
      btnRemove.innerText = "Remover";
      btnRemove.onclick = () => { removeMember(index); };
      li.appendChild(btnRemove);

      list.appendChild(li);

      if(m.faltas >=2) {
        console.warn(`${m.youtube} tem ${m.faltas} faltas!`);
      }
    });

    saveData();
  }

  function addMember() {
    const yt = document.getElementById("youtube").value;
    const ff = document.getElementById("ff").value;
    if(yt && ff) {
      members.push({youtube: yt, ff: ff, pontos:0, faltas:0});
      document.getElementById("youtube").value = "";
      document.getElementById("ff").value = "";
      showPanel('list');
      renderList();
    } else alert("Preencha todos os campos!");
  }

  function addPoint(index) { members[index].pontos += 1; renderList(); }
  function subPoint(index) { members[index].pontos = Math.max(0, members[index].pontos-1); members[index].faltas +=1; renderList(); }
  function removeMember(index) { if(confirm("Remover este membro?")) { members.splice(index,1); renderList(); } }
  function resetPoints() { if(confirm("Zerar pontos e faltas?")) { members.forEach(m=>{m.pontos=0; m.faltas=0}); renderList(); } }

  // Exportar dados para arquivo JSON
  function exportData() {
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(members));
    const dlAnchor = document.createElement('a');
    dlAnchor.setAttribute("href", dataStr);
    dlAnchor.setAttribute("download", "guilda_members.json");
    dlAnchor.click();
  }

  // Importar dados de arquivo JSON
  function importData() {
    const fileInput = document.getElementById("importFile");
    if(fileInput.files.length === 0) { alert("Selecione um arquivo JSON"); return; }
    const file = fileInput.files[0];
    const reader = new FileReader();
    reader.onload = function(e) {
      try {
        members = JSON.parse(e.target.result);
        renderList();
      } catch(err) { alert("Arquivo inv√°lido"); }
    }
    reader.readAsText(file);
  }

  renderList();
</script>

</body>
</html>